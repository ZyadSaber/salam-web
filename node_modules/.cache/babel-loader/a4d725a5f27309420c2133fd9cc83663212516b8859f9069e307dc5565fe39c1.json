{"ast":null,"code":"var _jsxFileName = \"/home/zyad/Documents/ActiveProjects/SalamApp/src/Pages/CustomerInvoices/component.tsx\",\n  _s = $RefreshSig$();\nimport { memo, useCallback, useEffect, useState } from \"react\";\nimport InsertForm from \"./Partials/InsertForm\";\nimport InputText from \"../../components/InputText/InputText\";\nimport useFormManager from \"../../hooks/useFormManager\";\nimport usePost from \"../../hooks/usePost\";\nimport Table from \"../../components/TableView/Table\";\nimport { columns } from \"./constant\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst CustomerInvoices = () => {\n  _s();\n  const {\n    setRow\n  } = usePost(\"invoices/customer_invoice_dml\");\n  const [itemsType, setItemsType] = useState({\n    customer_id: 0,\n    date: \"\",\n    items: [],\n    query_status: \"n\",\n    total: 0,\n    discount: 0,\n    total_after_discount: 0,\n    paid: 0,\n    credit: 0\n  });\n  const [activeItem, setActiveItem] = useState({\n    item_id: 0,\n    width: 0,\n    height: 0,\n    size: 0,\n    quantity: 0,\n    price: 0,\n    total: 0,\n    notes: \"\",\n    itemName: \"\",\n    print_id: 0,\n    print_name: \"\"\n  });\n  const {\n    state: itemState,\n    onChange: itemChange\n  } = useFormManager(activeItem, setActiveItem);\n  const {\n    state,\n    onChange\n  } = useFormManager({\n    initialValue: itemsType,\n    setSelectedRow: setItemsType\n  });\n  const resetItemsType = useCallback(() => {\n    //@ts-ignore\n    setItemsType({\n      customer_id: 0,\n      date: \"\",\n      items: [],\n      query_status: \"n\",\n      total: 0,\n      discount: 0,\n      total_after_discount: 0,\n      paid: 0,\n      credit: 0\n    });\n  }, []);\n  const handleAdd = useCallback(() => {\n    setItemsType({\n      ...itemsType,\n      items: [...itemsType.items, activeItem],\n      total: itemsType.total + activeItem.total\n    });\n    setActiveItem({\n      item_id: 0,\n      width: 0,\n      height: 0,\n      size: 0,\n      quantity: 0,\n      price: 0,\n      total: 0,\n      notes: \"\",\n      itemName: \"\",\n      print_id: 0,\n      print_name: \"\"\n    });\n  }, [activeItem, itemsType]);\n\n  // const handleDelete = useCallback((passedItem: itemsType) => {\n  //     // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n  //     let newItems = itemsType.items.filter((item: itemsType) => { item !== passedItem })\n  //     // setItemsType({ ...itemsType, items: newItems })\n  //     console.log(newItems)\n  // }, [itemsType]);\n\n  const handleSave = useCallback(() => {\n    setRow(itemsType);\n    resetItemsType();\n  }, [itemsType, resetItemsType, setRow]);\n  useEffect(() => {\n    setItemsType({\n      ...itemsType,\n      total_after_discount: itemsType.total - itemsType.discount,\n      credit: itemsType.total - itemsType.discount - itemsType.paid\n    });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [itemsType.total, itemsType.discount, itemsType.paid]);\n  const addionalButtons = [{\n    icon: \"fa-solid fa-broom\",\n    onClick: resetItemsType\n  }];\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: itemsType.items,\n      actionColumn: true,\n      actionLabel: \"Delete\"\n      // onAction={handleDelete}\n      ,\n      hideTools: false,\n      onAdd: handleAdd,\n      onSave: handleSave,\n      onSelectedRow: setActiveItem,\n      canAdd: true,\n      canSave: true,\n      addionalButtons: addionalButtons,\n      children: /*#__PURE__*/_jsxDEV(InsertForm, {\n        itemState: itemState,\n        itemChange: itemChange,\n        activeItem: activeItem,\n        setActiveItem: setActiveItem,\n        onChange: onChange,\n        state: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\",\n        justifyContent: \"space-between\",\n        padding: \"0 100px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputText, {\n        name: \"total\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.total,\n        Label: \"Total\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"discount\"\n        //@ts-ignore\n        ,\n        value: state.discount,\n        Label: \"Discount\",\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"totalAfterDiscount\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.total_after_discount,\n        Label: \"Total After Discount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"paid\"\n        //@ts-ignore\n        ,\n        value: state.paid,\n        Label: \"Paid\",\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"credit\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.credit,\n        Label: \"Credit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(CustomerInvoices, \"8wNdVHJ4TvyW8stpKqXjADBheAY=\", false, function () {\n  return [usePost, useFormManager, useFormManager];\n});\n_c = CustomerInvoices;\nexport default _c2 = /*#__PURE__*/memo(CustomerInvoices);\nvar _c, _c2;\n$RefreshReg$(_c, \"CustomerInvoices\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["memo","useCallback","useEffect","useState","InsertForm","InputText","useFormManager","usePost","Table","columns","CustomerInvoices","setRow","itemsType","setItemsType","customer_id","date","items","query_status","total","discount","total_after_discount","paid","credit","activeItem","setActiveItem","item_id","width","height","size","quantity","price","notes","itemName","print_id","print_name","state","itemState","onChange","itemChange","initialValue","setSelectedRow","resetItemsType","handleAdd","handleSave","addionalButtons","icon","onClick","display","justifyContent","padding"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/Pages/CustomerInvoices/component.tsx"],"sourcesContent":["import { memo, useCallback, useEffect, useState } from \"react\";\nimport InsertForm from \"./Partials/InsertForm\";\nimport InputText from \"../../components/InputText/InputText\";\nimport useFormManager from \"../../hooks/useFormManager\";\nimport usePost from \"../../hooks/usePost\";\nimport { invoiceDtls, itemsType } from \"./interface\";\nimport Table from \"../../components/TableView/Table\";\nimport { columns } from \"./constant\"\n\nconst CustomerInvoices = () => {\n    const { setRow } = usePost(\"invoices/customer_invoice_dml\")\n\n    const [itemsType, setItemsType] = useState<invoiceDtls>({\n        customer_id: 0,\n        date: \"\",\n        items: [],\n        query_status: \"n\",\n        total: 0,\n        discount: 0,\n        total_after_discount: 0,\n        paid: 0,\n        credit: 0\n    })\n    const [activeItem, setActiveItem] = useState<itemsType>({\n        item_id: 0,\n        width: 0,\n        height: 0,\n        size: 0,\n        quantity: 0,\n        price: 0,\n        total: 0,\n        notes: \"\",\n        itemName: \"\",\n        print_id: 0,\n        print_name: \"\"\n    })\n\n    const { state: itemState, onChange: itemChange } = useFormManager(activeItem, setActiveItem)\n    const { state, onChange } = useFormManager({ initialValue: itemsType, setSelectedRow: setItemsType })\n\n    const resetItemsType = useCallback(() => {\n        //@ts-ignore\n        setItemsType({\n            customer_id: 0,\n            date: \"\",\n            items: [],\n            query_status: \"n\",\n            total: 0,\n            discount: 0,\n            total_after_discount: 0,\n            paid: 0,\n            credit: 0\n        })\n    }, [])\n\n    const handleAdd = useCallback(() => {\n        setItemsType({ ...itemsType, items: [...itemsType.items, activeItem], total: itemsType.total + activeItem.total })\n        setActiveItem({\n            item_id: 0,\n            width: 0,\n            height: 0,\n            size: 0,\n            quantity: 0,\n            price: 0,\n            total: 0,\n            notes: \"\",\n            itemName: \"\",\n            print_id: 0,\n            print_name: \"\"\n        })\n\n    }, [activeItem, itemsType]);\n\n    // const handleDelete = useCallback((passedItem: itemsType) => {\n    //     // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n    //     let newItems = itemsType.items.filter((item: itemsType) => { item !== passedItem })\n    //     // setItemsType({ ...itemsType, items: newItems })\n    //     console.log(newItems)\n    // }, [itemsType]);\n\n    const handleSave = useCallback(() => {\n        setRow(itemsType)\n        resetItemsType()\n    }, [itemsType, resetItemsType, setRow]);\n\n    useEffect(() => {\n        setItemsType({ ...itemsType, total_after_discount: itemsType.total - itemsType.discount, credit: itemsType.total - itemsType.discount - itemsType.paid })\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [itemsType.total, itemsType.discount, itemsType.paid])\n\n    const addionalButtons = [\n        {\n            icon: \"fa-solid fa-broom\",\n            onClick: resetItemsType\n        },\n    ]\n    return (\n        <>\n\n            <Table\n                columns={columns}\n                dataSource={itemsType.items}\n                actionColumn\n                actionLabel=\"Delete\"\n                // onAction={handleDelete}\n                hideTools={false}\n                onAdd={handleAdd}\n                onSave={handleSave}\n                onSelectedRow={setActiveItem}\n                canAdd={true}\n                canSave={true}\n                addionalButtons={addionalButtons}\n            >\n                <InsertForm\n                    itemState={itemState}\n                    itemChange={itemChange}\n                    activeItem={activeItem}\n                    setActiveItem={setActiveItem}\n                    onChange={onChange}\n                    state={state}\n                />\n            </Table>\n            <div style={{ display: \"flex\", width: \"100%\", justifyContent: \"space-between\", padding: \"0 100px\" }}>\n                <InputText\n                    name='total'\n                    disabled\n                    //@ts-ignore\n                    value={state.total}\n                    Label=\"Total\"\n                />\n                <InputText\n                    name='discount'\n                    //@ts-ignore\n                    value={state.discount}\n                    Label=\"Discount\"\n                    onChange={onChange}\n                />\n                <InputText\n                    name='totalAfterDiscount'\n                    disabled\n                    //@ts-ignore\n                    value={state.total_after_discount}\n                    Label=\"Total After Discount\"\n                />\n                <InputText\n                    name='paid'\n                    //@ts-ignore\n                    value={state.paid}\n                    Label=\"Paid\"\n                    onChange={onChange}\n                />\n                <InputText\n                    name='credit'\n                    disabled\n                    //@ts-ignore\n                    value={state.credit}\n                    Label=\"Credit\"\n                />\n            </div>\n        </>\n    )\n}\n\nexport default memo(CustomerInvoices)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}