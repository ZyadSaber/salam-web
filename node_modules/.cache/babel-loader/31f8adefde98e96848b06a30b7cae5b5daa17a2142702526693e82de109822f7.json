{"ast":null,"code":"import _regeneratorRuntime from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";var useFetch=function useFetch(_ref){var link=_ref.link,fetchOnFirstRun=_ref.fetchOnFirstRun,refreshTimeout=_ref.refreshTimeout,params=_ref.params;var url=\"http://144.24.209.19:9090/api/v1/\".concat(link);// const url = `http://127.0.0.1:9090/api/v1/${link}`\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),state=_useState4[0],setState=_useState4[1];var getData=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(link){var response,apiData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(link+\"?\"+new URLSearchParams(params));case 2:response=_context.sent;_context.next=5;return response.json();case 5:apiData=_context.sent;setData(apiData);case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}(),[params]);useEffect(function(){if(fetchOnFirstRun){getData(url);}},[fetchOnFirstRun,getData,url,params]);var refresh=function refresh(){getData(url);};// setInterval(refresh, 60000)\nreturn{data:data,refresh:refresh,setData:setData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","useCallback","useFetch","link","fetchOnFirstRun","refreshTimeout","params","url","data","setData","state","setState","getData","fetch","URLSearchParams","response","json","apiData","refresh"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/hooks/useFetch.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\n\r\ninterface useFetchProp {\r\n  link: string;\r\n  fetchOnFirstRun?: boolean;\r\n  refreshTimeout?: number;\r\n  params?: any\r\n}\r\n\r\nconst useFetch = ({link, fetchOnFirstRun, refreshTimeout, params}: useFetchProp) => {\r\n  const url = `http://144.24.209.19:9090/api/v1/${link}`\r\n  // const url = `http://127.0.0.1:9090/api/v1/${link}`\r\n    const [data, setData] = useState<any>([]);\r\n    const [state, setState] = useState(false);\r\nconst getData = useCallback(async(link: string)=>{\r\n    const response=await fetch(link + \"?\" + new URLSearchParams(params));\r\n    const apiData=await response.json();  \r\n  setData(apiData);\r\n},[params])\r\n\r\n    useEffect(() => {\r\n      if(fetchOnFirstRun){\r\n      getData(url)\r\n      }\r\n      }, [fetchOnFirstRun, getData, url, params]);\r\n\r\n\r\n\r\n      const refresh = ()=>{\r\n      getData(url)\r\n      }\r\n      \r\n\r\n      // setInterval(refresh, 60000)\r\n\r\n      return{data, refresh, setData}\r\n}\r\n\r\nexport default useFetch"],"mappings":"sZAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CASxD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAAsE,IAAjEC,KAAI,MAAJA,IAAI,CAAEC,eAAe,MAAfA,eAAe,CAAEC,cAAc,MAAdA,cAAc,CAAEC,MAAM,MAANA,MAAM,CAC9D,GAAMC,IAAG,4CAAuCJ,IAAI,CAAE,CACtD;AACE,cAAwBJ,QAAQ,CAAM,EAAE,CAAC,wCAAlCS,IAAI,eAAEC,OAAO,eACpB,eAA0BV,QAAQ,CAAC,KAAK,CAAC,yCAAlCW,KAAK,eAAEC,QAAQ,eAC1B,GAAMC,QAAO,CAAGX,WAAW,6FAAC,iBAAME,IAAY,+JACrBU,MAAK,CAACV,IAAI,CAAG,GAAG,CAAG,GAAIW,gBAAe,CAACR,MAAM,CAAC,CAAC,QAA9DS,QAAQ,qCACMA,SAAQ,CAACC,IAAI,EAAE,QAA7BC,OAAO,eACfR,OAAO,CAACQ,OAAO,CAAC,CAAC,sDAClB,gEAAC,CAACX,MAAM,CAAC,CAAC,CAEPN,SAAS,CAAC,UAAM,CACd,GAAGI,eAAe,CAAC,CACnBQ,OAAO,CAACL,GAAG,CAAC,CACZ,CACA,CAAC,CAAE,CAACH,eAAe,CAAEQ,OAAO,CAAEL,GAAG,CAAED,MAAM,CAAC,CAAC,CAI3C,GAAMY,QAAO,CAAG,QAAVA,QAAO,EAAO,CACpBN,OAAO,CAACL,GAAG,CAAC,CACZ,CAAC,CAGD;AAEA,MAAM,CAACC,IAAI,CAAJA,IAAI,CAAEU,OAAO,CAAPA,OAAO,CAAET,OAAO,CAAPA,OAAO,CAAC,CACpC,CAAC,CAED,cAAeP,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}