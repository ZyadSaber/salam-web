{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect, useCallback } from \"react\";\nimport API_ID from \"../global/api\";\nconst useFetch = _ref => {\n  _s();\n  let {\n    link = \"\",\n    fetchOnFirstRun,\n    refreshTimeout,\n    params\n  } = _ref;\n  //@ts-ignore\n  console.log(API_ID[QUERY_CUSTOMER]);\n  const url = `http://144.24.209.19:9090/api/v1/${link}`;\n  // const url = `http://127.0.0.1:9090/api/v1/${link}`\n  // const url = `http://192.168.1.250:9090/api/v1/${link}`\n  const [data, setData] = useState([]);\n  const [runFetch, setRunFetch] = useState(false);\n  const getData = useCallback(async link => {\n    const response = await fetch(link + \"?\" + new URLSearchParams(params));\n    const apiData = await response.json();\n    setData(apiData);\n  }, [params]);\n  useEffect(() => {\n    if (fetchOnFirstRun) {\n      setRunFetch(true);\n      getData(url);\n    }\n  }, [fetchOnFirstRun, getData, url, params]);\n  const refresh = () => {\n    getData(url);\n  };\n  const handleTimeOUt = () => {\n    if (runFetch || fetchOnFirstRun) {\n      refresh();\n    }\n  };\n\n  // setInterval(handleTimeOUt, 60000)\n  // setTimeout(handleTimeOUt, 60000)s\n\n  return {\n    data,\n    refresh,\n    setData\n  };\n};\n_s(useFetch, \"POkIaBP5eO9d4rf3K77J2kCeBzo=\");\nexport default useFetch;","map":{"version":3,"names":["useState","useEffect","useCallback","API_ID","useFetch","link","fetchOnFirstRun","refreshTimeout","params","console","log","QUERY_CUSTOMER","url","data","setData","runFetch","setRunFetch","getData","response","fetch","URLSearchParams","apiData","json","refresh","handleTimeOUt"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/hooks/useFetch.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport API_ID from \"../global/api\"\r\n\r\ninterface useFetchProp {\r\n  link: string;\r\n  fetchOnFirstRun?: boolean;\r\n  refreshTimeout?: number;\r\n  params?: any\r\n}\r\n\r\nconst useFetch = ({link = \"\", fetchOnFirstRun, refreshTimeout, params}: useFetchProp) => {\r\n  //@ts-ignore\r\n  console.log(API_ID[QUERY_CUSTOMER])\r\n  const url = `http://144.24.209.19:9090/api/v1/${link}`\r\n  // const url = `http://127.0.0.1:9090/api/v1/${link}`\r\n  // const url = `http://192.168.1.250:9090/api/v1/${link}`\r\n    const [data, setData] = useState<any>([]);\r\n    const [runFetch, setRunFetch] = useState(false);\r\nconst getData = useCallback(async(link: string)=>{\r\n    const response=await fetch(link + \"?\" + new URLSearchParams(params));\r\n    const apiData=await response.json();  \r\n  setData(apiData);\r\n},[params])\r\n\r\n    useEffect(() => {\r\n      if(fetchOnFirstRun){\r\n        setRunFetch(true)\r\n        getData(url)\r\n      }\r\n      }, [fetchOnFirstRun, getData, url, params]);\r\n\r\n\r\n\r\n      const refresh = ()=>{\r\n          getData(url)\r\n      }\r\n\r\n      const handleTimeOUt = ()=>{\r\n        if(runFetch || fetchOnFirstRun){\r\n          refresh()\r\n        }\r\n      }\r\n      \r\n      // setInterval(handleTimeOUt, 60000)\r\n      // setTimeout(handleTimeOUt, 60000)s\r\n\r\n      return{data, refresh, setData}\r\n}\r\n\r\nexport default useFetch"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AACxD,OAAOC,MAAM,MAAM,eAAe;AASlC,MAAMC,QAAQ,GAAG,QAAwE;EAAA;EAAA,IAAvE;IAACC,IAAI,GAAG,EAAE;IAAEC,eAAe;IAAEC,cAAc;IAAEC;EAAoB,CAAC;EAClF;EACAC,OAAO,CAACC,GAAG,CAACP,MAAM,CAACQ,cAAc,CAAC,CAAC;EACnC,MAAMC,GAAG,GAAI,oCAAmCP,IAAK,EAAC;EACtD;EACA;EACE,MAAM,CAACQ,IAAI,EAAEC,OAAO,CAAC,GAAGd,QAAQ,CAAM,EAAE,CAAC;EACzC,MAAM,CAACe,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAMiB,OAAO,GAAGf,WAAW,CAAC,MAAMG,IAAY,IAAG;IAC7C,MAAMa,QAAQ,GAAC,MAAMC,KAAK,CAACd,IAAI,GAAG,GAAG,GAAG,IAAIe,eAAe,CAACZ,MAAM,CAAC,CAAC;IACpE,MAAMa,OAAO,GAAC,MAAMH,QAAQ,CAACI,IAAI,EAAE;IACrCR,OAAO,CAACO,OAAO,CAAC;EAClB,CAAC,EAAC,CAACb,MAAM,CAAC,CAAC;EAEPP,SAAS,CAAC,MAAM;IACd,IAAGK,eAAe,EAAC;MACjBU,WAAW,CAAC,IAAI,CAAC;MACjBC,OAAO,CAACL,GAAG,CAAC;IACd;EACA,CAAC,EAAE,CAACN,eAAe,EAAEW,OAAO,EAAEL,GAAG,EAAEJ,MAAM,CAAC,CAAC;EAI3C,MAAMe,OAAO,GAAG,MAAI;IAChBN,OAAO,CAACL,GAAG,CAAC;EAChB,CAAC;EAED,MAAMY,aAAa,GAAG,MAAI;IACxB,IAAGT,QAAQ,IAAIT,eAAe,EAAC;MAC7BiB,OAAO,EAAE;IACX;EACF,CAAC;;EAED;EACA;;EAEA,OAAM;IAACV,IAAI;IAAEU,OAAO;IAAET;EAAO,CAAC;AACpC,CAAC;AAAA,GArCKV,QAAQ;AAuCd,eAAeA,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}