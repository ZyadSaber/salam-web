{"ast":null,"code":"import _toConsumableArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{memo,useState,useCallback,useEffect}from'react';import\"./style.css\";import usePost from'../../hooks/usePost';import Table from'../../components/TableView/Table';import InputText from'../../components/InputText/InputText';import useFormManager from'../../hooks/useFormManager';import{columns}from\"./constants\";import InsertForm from\"./Partials/InsertForm\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var SupplierInvoice=function SupplierInvoice(){var _usePost=usePost(\"invoices/supplier_invoice_dml\"),setRow=_usePost.setRow;var _useState=useState({supplier_id:0,date:\"\",items:[],query_status:\"n\",total:0,discount:0,total_after_discount:0,paid:0,credit:0}),_useState2=_slicedToArray(_useState,2),itemsType=_useState2[0],setItemsType=_useState2[1];var _useState3=useState({item_id:0,width:0,height:0,size:0,quantity:0,price:0,total:0,notes:\"\",itemName:\"\"}),_useState4=_slicedToArray(_useState3,2),activeItem=_useState4[0],setActiveItem=_useState4[1];var _useFormManager=useFormManager({initialValue:activeItem,setSelectedRow:setActiveItem}),itemState=_useFormManager.state,itemChange=_useFormManager.onChange;var _useFormManager2=useFormManager({initialValue:itemsType,setSelectedRow:setItemsType}),state=_useFormManager2.state,onChange=_useFormManager2.onChange;var resetItemsType=useCallback(function(){//@ts-ignore\nsetItemsType({supplier_id:0,date:\"\",items:[],query_status:\"n\",total:0,discount:0,total_after_discount:0,paid:0,credit:0});},[]);var handleAdd=useCallback(function(){setItemsType(_objectSpread(_objectSpread({},itemsType),{},{items:[].concat(_toConsumableArray(itemsType.items),[activeItem]),total:itemsType.total+activeItem.total}));setActiveItem({item_id:0,width:0,height:0,size:0,quantity:0,price:0,total:0,notes:\"\",itemName:\"\"});},[activeItem,itemsType]);// const handleDelete = useCallback((passedItem: itemsType) => {\n//     // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n//     let newItems = itemsType.items.filter((item: itemsType) => { item !== passedItem })\n//     // setItemsType({ ...itemsType, items: newItems })\n//     console.log(newItems)\n// }, [itemsType]);\nvar handleSave=useCallback(function(){setRow(itemsType);resetItemsType();},[itemsType,resetItemsType,setRow]);useEffect(function(){setItemsType(_objectSpread(_objectSpread({},itemsType),{},{total_after_discount:itemsType.total-itemsType.discount,credit:itemsType.total-itemsType.discount-itemsType.paid}));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[itemsType.total,itemsType.discount,itemsType.paid]);var addionalButtons=[{icon:\"fa-solid fa-broom\",onClick:resetItemsType}];return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:itemsType.items,actionColumn:true,actionLabel:\"Delete\"// onAction={handleDelete}\n,hideTools:false,onAdd:handleAdd,onSave:handleSave,onSelectedRow:setActiveItem,canAdd:true,canSave:true,addionalButtons:addionalButtons,children:/*#__PURE__*/_jsx(InsertForm,{itemState:itemState,itemChange:itemChange,activeItem:activeItem,setActiveItem:setActiveItem,onChange:onChange,state:state})}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",width:\"100%\",justifyContent:\"space-between\",padding:\"0 100px\"},children:[/*#__PURE__*/_jsx(InputText,{name:\"total\",disabled:true//@ts-ignore\n,value:state.total,Label:\"Total\"}),/*#__PURE__*/_jsx(InputText,{name:\"discount\"//@ts-ignore\n,value:state.discount,Label:\"Discount\",onChange:onChange}),/*#__PURE__*/_jsx(InputText,{name:\"totalAfterDiscount\",disabled:true//@ts-ignore\n,value:state.total_after_discount,Label:\"Total After Discount\"}),/*#__PURE__*/_jsx(InputText,{name:\"paid\"//@ts-ignore\n,value:state.paid,Label:\"Paid\",onChange:onChange}),/*#__PURE__*/_jsx(InputText,{name:\"credit\",disabled:true//@ts-ignore\n,value:state.credit,Label:\"Credit\"})]})]});};export default/*#__PURE__*/memo(SupplierInvoice);","map":{"version":3,"names":["memo","useState","useCallback","useEffect","usePost","Table","InputText","useFormManager","columns","InsertForm","SupplierInvoice","setRow","supplier_id","date","items","query_status","total","discount","total_after_discount","paid","credit","itemsType","setItemsType","item_id","width","height","size","quantity","price","notes","itemName","activeItem","setActiveItem","initialValue","setSelectedRow","itemState","state","itemChange","onChange","resetItemsType","handleAdd","handleSave","addionalButtons","icon","onClick","display","justifyContent","padding"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/Pages/SupplierInvoice/component.tsx"],"sourcesContent":["import { memo, useState, useCallback, useEffect } from 'react';\r\nimport \"./style.css\";\r\nimport usePost from '../../hooks/usePost';\r\nimport Table from '../../components/TableView/Table';\r\nimport InputText from '../../components/InputText/InputText';\r\nimport useFormManager from '../../hooks/useFormManager';\r\nimport { columns } from \"./constants\";\r\nimport InsertForm from \"./Partials/InsertForm\"\r\nimport { itemsType, invoiceDtls } from \"./interface\"\r\n\r\nconst SupplierInvoice = () => {\r\n\r\n    const { setRow } = usePost(\"invoices/supplier_invoice_dml\")\r\n\r\n    const [itemsType, setItemsType] = useState<invoiceDtls>({\r\n        supplier_id: 0,\r\n        date: \"\",\r\n        items: [],\r\n        query_status: \"n\",\r\n        total: 0,\r\n        discount: 0,\r\n        total_after_discount: 0,\r\n        paid: 0,\r\n        credit: 0\r\n    })\r\n    const [activeItem, setActiveItem] = useState<itemsType>({\r\n        item_id: 0,\r\n        width: 0,\r\n        height: 0,\r\n        size: 0,\r\n        quantity: 0,\r\n        price: 0,\r\n        total: 0,\r\n        notes: \"\",\r\n        itemName: \"\"\r\n    })\r\n\r\n    const { state: itemState, onChange: itemChange } = useFormManager({ initialValue: activeItem, setSelectedRow: setActiveItem })\r\n    const { state, onChange } = useFormManager({ initialValue: itemsType, setSelectedRow: setItemsType })\r\n\r\n    const resetItemsType = useCallback(() => {\r\n        //@ts-ignore\r\n        setItemsType({\r\n            supplier_id: 0,\r\n            date: \"\",\r\n            items: [],\r\n            query_status: \"n\",\r\n            total: 0,\r\n            discount: 0,\r\n            total_after_discount: 0,\r\n            paid: 0,\r\n            credit: 0\r\n        })\r\n    }, [])\r\n\r\n    const handleAdd = useCallback(() => {\r\n        setItemsType({ ...itemsType, items: [...itemsType.items, activeItem], total: itemsType.total + activeItem.total })\r\n        setActiveItem({\r\n            item_id: 0,\r\n            width: 0,\r\n            height: 0,\r\n            size: 0,\r\n            quantity: 0,\r\n            price: 0,\r\n            total: 0,\r\n            notes: \"\",\r\n            itemName: \"\"\r\n        })\r\n\r\n    }, [activeItem, itemsType]);\r\n\r\n    // const handleDelete = useCallback((passedItem: itemsType) => {\r\n    //     // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n    //     let newItems = itemsType.items.filter((item: itemsType) => { item !== passedItem })\r\n    //     // setItemsType({ ...itemsType, items: newItems })\r\n    //     console.log(newItems)\r\n    // }, [itemsType]);\r\n\r\n    const handleSave = useCallback(() => {\r\n        setRow(itemsType)\r\n        resetItemsType()\r\n    }, [itemsType, resetItemsType, setRow]);\r\n\r\n    useEffect(() => {\r\n        setItemsType({ ...itemsType, total_after_discount: itemsType.total - itemsType.discount, credit: itemsType.total - itemsType.discount - itemsType.paid })\r\n        // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    }, [itemsType.total, itemsType.discount, itemsType.paid])\r\n\r\n    const addionalButtons = [\r\n        {\r\n            icon: \"fa-solid fa-broom\",\r\n            onClick: resetItemsType\r\n        },\r\n    ]\r\n    return (\r\n        <>\r\n\r\n            <Table\r\n                columns={columns}\r\n                dataSource={itemsType.items}\r\n                actionColumn\r\n                actionLabel=\"Delete\"\r\n                // onAction={handleDelete}\r\n                hideTools={false}\r\n                onAdd={handleAdd}\r\n                onSave={handleSave}\r\n                onSelectedRow={setActiveItem}\r\n                canAdd={true}\r\n                canSave={true}\r\n                addionalButtons={addionalButtons}\r\n            >\r\n                <InsertForm\r\n                    itemState={itemState}\r\n                    itemChange={itemChange}\r\n                    activeItem={activeItem}\r\n                    setActiveItem={setActiveItem}\r\n                    onChange={onChange}\r\n                    state={state}\r\n                />\r\n            </Table>\r\n            <div style={{ display: \"flex\", width: \"100%\", justifyContent: \"space-between\", padding: \"0 100px\" }}>\r\n                <InputText\r\n                    name='total'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.total}\r\n                    Label=\"Total\"\r\n                />\r\n                <InputText\r\n                    name='discount'\r\n                    //@ts-ignore\r\n                    value={state.discount}\r\n                    Label=\"Discount\"\r\n                    onChange={onChange}\r\n                />\r\n                <InputText\r\n                    name='totalAfterDiscount'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.total_after_discount}\r\n                    Label=\"Total After Discount\"\r\n                />\r\n                <InputText\r\n                    name='paid'\r\n                    //@ts-ignore\r\n                    value={state.paid}\r\n                    Label=\"Paid\"\r\n                    onChange={onChange}\r\n                />\r\n                <InputText\r\n                    name='credit'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.credit}\r\n                    Label=\"Credit\"\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default memo(SupplierInvoice);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}