{"ast":null,"code":"import _regeneratorRuntime from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from\"react\";import useLoacalStorage from\"./useLocalStorage\";import API_ID from\"../global/api\";;var usePost=function usePost(_ref){var _ref$link=_ref.link,link=_ref$link===void 0?\"\":_ref$link,_ref$noAuthorization=_ref.noAuthorization,noAuthorization=_ref$noAuthorization===void 0?false:_ref$noAuthorization;//@ts-ignore\nvar url=\"http://144.24.209.19:9090/api/v1/\".concat(API_ID[link]);// const url = `http://127.0.0.1:9090/api/v1/${link}`\n// const url = `http://192.168.1.250:9090/api/v1/${link}`\nvar _useState=useState(),_useState2=_slicedToArray(_useState,2),success=_useState2[0],setSuccess=_useState2[1];var _useLoacalStorage=useLoacalStorage(),authorization=_useLoacalStorage.authorization;var postData=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dataToPost){var settings,fetchResponse,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(authorization||noAuthorization)){_context.next=17;break;}dataToPost.authorization=authorization;settings={method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:JSON.stringify(dataToPost)};_context.prev=3;_context.next=6;return fetch(url,settings);case 6:fetchResponse=_context.sent;_context.next=9;return fetchResponse.json();case 9:data=_context.sent;setSuccess(data);return _context.abrupt(\"return\",data);case 14:_context.prev=14;_context.t0=_context[\"catch\"](3);console.log(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[3,14]]);}));return function(_x){return _ref2.apply(this,arguments);};}(),[authorization,noAuthorization,url]);var setRow=useCallback(function(row){postData(row);},[postData]);return{success:success,setRow:setRow};};export default usePost;","map":{"version":3,"names":["useState","useCallback","useLoacalStorage","API_ID","usePost","link","noAuthorization","url","success","setSuccess","authorization","postData","dataToPost","settings","method","headers","Accept","body","JSON","stringify","fetch","fetchResponse","json","data","console","log","setRow","row"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/hooks/usePost.ts"],"sourcesContent":["import { useState, useCallback } from \"react\";\r\nimport useLoacalStorage from \"./useLocalStorage\";\r\nimport API_ID from \"../global/api\"\r\n\r\ninterface usePostProps{\r\n    link: string;\r\n    noAuthorization?: boolean\r\n};\r\n\r\nconst usePost = ({\r\n    link  = \"\",\r\n    noAuthorization = false\r\n}: usePostProps) => {\r\n    //@ts-ignore\r\n    const url = `http://144.24.209.19:9090/api/v1/${API_ID[link]}`\r\n    // const url = `http://127.0.0.1:9090/api/v1/${link}`\r\n    // const url = `http://192.168.1.250:9090/api/v1/${link}`\r\n    const [success, setSuccess] = useState()\r\n    const { authorization } = useLoacalStorage()\r\n    const postData = useCallback(async (dataToPost: any) => {\r\n        if(authorization || noAuthorization){\r\n        dataToPost.authorization = authorization\r\n        const settings = {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify(dataToPost)\r\n        };\r\n        try {\r\n            const fetchResponse = await fetch(url, settings);\r\n            const data = await fetchResponse.json();\r\n            setSuccess(data)\r\n            return data\r\n        } catch (e) {\r\n            console.log(e)\r\n        }}\r\n    }, [authorization, noAuthorization, url])\r\n\r\n    const setRow = useCallback((row: any) => {\r\n        postData(row)\r\n    }, [postData])\r\n\r\n    return { success, setRow }\r\n}\r\n\r\nexport default usePost"],"mappings":"sZAAA,OAASA,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC7C,MAAOC,iBAAgB,KAAM,mBAAmB,CAChD,MAAOC,OAAM,KAAM,eAAe,CAKjC,CAED,GAAMC,QAAO,CAAG,QAAVA,QAAO,MAGO,oBAFhBC,IAAI,CAAJA,IAAI,oBAAI,EAAE,qCACVC,eAAe,CAAfA,eAAe,+BAAG,KAAK,sBAEvB;AACA,GAAMC,IAAG,4CAAuCJ,MAAM,CAACE,IAAI,CAAC,CAAE,CAC9D;AACA;AACA,cAA8BL,QAAQ,EAAE,wCAAjCQ,OAAO,eAAEC,UAAU,eAC1B,sBAA0BP,gBAAgB,EAAE,CAApCQ,aAAa,mBAAbA,aAAa,CACrB,GAAMC,SAAQ,CAAGV,WAAW,6FAAC,iBAAOW,UAAe,yJAC5CF,aAAa,EAAIJ,eAAe,2BACnCM,UAAU,CAACF,aAAa,CAAGA,aAAa,CAClCG,QAAQ,CAAG,CACbC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBACpB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACP,UAAU,CACnC,CAAC,uCAE+BQ,MAAK,CAACb,GAAG,CAAEM,QAAQ,CAAC,QAA1CQ,aAAa,qCACAA,cAAa,CAACC,IAAI,EAAE,QAAjCC,IAAI,eACVd,UAAU,CAACc,IAAI,CAAC,iCACTA,IAAI,4DAEXC,OAAO,CAACC,GAAG,aAAG,sEAErB,gEAAE,CAACf,aAAa,CAAEJ,eAAe,CAAEC,GAAG,CAAC,CAAC,CAEzC,GAAMmB,OAAM,CAAGzB,WAAW,CAAC,SAAC0B,GAAQ,CAAK,CACrChB,QAAQ,CAACgB,GAAG,CAAC,CACjB,CAAC,CAAE,CAAChB,QAAQ,CAAC,CAAC,CAEd,MAAO,CAAEH,OAAO,CAAPA,OAAO,CAAEkB,MAAM,CAANA,MAAO,CAAC,CAC9B,CAAC,CAED,cAAetB,QAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}