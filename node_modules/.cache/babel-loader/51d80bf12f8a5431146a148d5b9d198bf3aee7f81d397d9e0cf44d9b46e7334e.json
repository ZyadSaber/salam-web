{"ast":null,"code":"import _regeneratorRuntime from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";import API_ID from\"../global/api\";import useLoacalStorage from\"./useLocalStorage\";var useFetch=function useFetch(_ref){var _ref$link=_ref.link,link=_ref$link===void 0?\"\":_ref$link,fetchOnFirstRun=_ref.fetchOnFirstRun,refreshTimeout=_ref.refreshTimeout,params=_ref.params;var _useLoacalStorage=useLoacalStorage(),authorization=_useLoacalStorage.authorization;//@ts-ignore\nvar url=\"http://144.24.209.19:9090/api/v1/\".concat(API_ID[link]);// const url = `http://127.0.0.1:9090/api/v1/${link}`\n// const url = `http://192.168.1.250:9090/api/v1/${link}`\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var getData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,apiData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(authorization){_context.next=8;break;}_context.next=3;return fetch(\"\".concat(url,\"?authorization=\").concat(authorization,\"&\").concat(new URLSearchParams(params)));case 3:response=_context.sent;_context.next=6;return response.json();case 6:apiData=_context.sent;setData(apiData);case 8:case\"end\":return _context.stop();}}},_callee);})),[authorization,params,url]);useEffect(function(){if(fetchOnFirstRun){getData();}},[fetchOnFirstRun,getData,url,params]);var runFetch=useCallback(function(){console.log(link);getData();},[getData,link]);return{data:data,runFetch:runFetch,setData:setData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","useCallback","API_ID","useLoacalStorage","useFetch","link","fetchOnFirstRun","refreshTimeout","params","authorization","url","data","setData","getData","fetch","URLSearchParams","response","json","apiData","runFetch","console","log"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/hooks/useFetch.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport API_ID from \"../global/api\";\r\nimport useLoacalStorage from \"./useLocalStorage\";\r\n\r\ninterface useFetchProp {\r\n  link: string;\r\n  fetchOnFirstRun?: boolean;\r\n  refreshTimeout?: number;\r\n  params?: any\r\n}\r\n\r\nconst useFetch = ({link = \"\", fetchOnFirstRun, refreshTimeout, params}: useFetchProp) => {\r\n  const { authorization } = useLoacalStorage()\r\n  //@ts-ignore\r\n  const url = `http://144.24.209.19:9090/api/v1/${API_ID[link]}`\r\n  // const url = `http://127.0.0.1:9090/api/v1/${link}`\r\n  // const url = `http://192.168.1.250:9090/api/v1/${link}`\r\n  const [data, setData] = useState<any>([]);\r\n  const getData = useCallback(async()=>{\r\n    if(!authorization){\r\nconst response = await fetch(`${url}?authorization=${authorization}&${new URLSearchParams(params)}`)\r\n    const apiData=await response.json();  \r\n  setData(apiData);\r\n    }\r\n},[authorization, params, url])\r\n\r\n\r\n    useEffect(() => {\r\n      if(fetchOnFirstRun){\r\n        getData()\r\n      }\r\n      }, [fetchOnFirstRun, getData, url, params]);\r\n\r\n\r\n\r\n      const runFetch = useCallback(()=>{\r\n        console.log(link)\r\n          getData()\r\n      },[getData, link])\r\n\r\n      return{data, runFetch, setData}\r\n}\r\n\r\nexport default useFetch"],"mappings":"sZAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACxD,MAAOC,OAAM,KAAM,eAAe,CAClC,MAAOC,iBAAgB,KAAM,mBAAmB,CAShD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAA2E,oBAAtEC,IAAI,CAAJA,IAAI,oBAAG,EAAE,WAAEC,eAAe,MAAfA,eAAe,CAAEC,cAAc,MAAdA,cAAc,CAAEC,MAAM,MAANA,MAAM,CACnE,sBAA0BL,gBAAgB,EAAE,CAApCM,aAAa,mBAAbA,aAAa,CACrB;AACA,GAAMC,IAAG,4CAAuCR,MAAM,CAACG,IAAI,CAAC,CAAE,CAC9D;AACA;AACA,cAAwBN,QAAQ,CAAM,EAAE,CAAC,wCAAlCY,IAAI,eAAEC,OAAO,eACpB,GAAMC,QAAO,CAAGZ,WAAW,wEAAC,6JACtBQ,aAAa,+CACEK,MAAK,WAAIJ,GAAG,2BAAkBD,aAAa,aAAI,GAAIM,gBAAe,CAACP,MAAM,CAAC,EAAG,QAA9FQ,QAAQ,qCACUA,SAAQ,CAACC,IAAI,EAAE,QAA7BC,OAAO,eACfN,OAAO,CAACM,OAAO,CAAC,CAAC,sDAElB,GAAC,CAACT,aAAa,CAAED,MAAM,CAAEE,GAAG,CAAC,CAAC,CAG3BV,SAAS,CAAC,UAAM,CACd,GAAGM,eAAe,CAAC,CACjBO,OAAO,EAAE,CACX,CACA,CAAC,CAAE,CAACP,eAAe,CAAEO,OAAO,CAAEH,GAAG,CAAEF,MAAM,CAAC,CAAC,CAI3C,GAAMW,SAAQ,CAAGlB,WAAW,CAAC,UAAI,CAC/BmB,OAAO,CAACC,GAAG,CAAChB,IAAI,CAAC,CACfQ,OAAO,EAAE,CACb,CAAC,CAAC,CAACA,OAAO,CAAER,IAAI,CAAC,CAAC,CAElB,MAAM,CAACM,IAAI,CAAJA,IAAI,CAAEQ,QAAQ,CAARA,QAAQ,CAAEP,OAAO,CAAPA,OAAO,CAAC,CACrC,CAAC,CAED,cAAeR,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}