{"ast":null,"code":"var _jsxFileName = \"/home/zyad/Documents/ActiveProjects/SalamApp/src/Pages/SupplierInvoice/component.tsx\",\n  _s = $RefreshSig$();\nimport { memo, useState, useCallback, useEffect } from 'react';\nimport \"./style.css\";\nimport usePost from '../../hooks/usePost';\nimport Table from '../../components/TableView/Table';\nimport InputText from '../../components/InputText/InputText';\nimport useFormManager from '../../hooks/useFormManager';\nimport { columns } from \"./constants\";\nimport InsertForm from \"./Partials/InsertForm\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SupplierInvoice = () => {\n  _s();\n  const {\n    setRow\n  } = usePost(\"invoices/supplier_invoice_dml\");\n  const [itemsType, setItemsType] = useState({\n    supplier_id: 1,\n    date: Date.now(),\n    items: [],\n    query_status: \"n\",\n    total: 0,\n    discount: 0,\n    total_after_discount: 0,\n    paid: 0,\n    credit: 0\n  });\n  const [activeItem, setActiveItem] = useState({\n    item_id: 0,\n    width: 0,\n    height: 0,\n    size: 0,\n    quantity: 0,\n    price: 0,\n    total: 0,\n    notes: \"\",\n    itemName: \"\"\n  });\n  const {\n    state: itemState,\n    onChange: itemChange\n  } = useFormManager(activeItem, setActiveItem);\n  const {\n    state,\n    onChange\n  } = useFormManager(itemsType, setItemsType);\n  const resetItemsType = useCallback(() => {\n    //@ts-ignore\n    setItemsType({});\n  }, []);\n  const handleUpdateTable = useCallback(() => {\n    itemsType.items.map(item => {\n      setItemsType({\n        ...itemsType,\n        total: itemsType.total + item.total,\n        total_after_discount: (itemsType.total + item.total) * itemsType.discount,\n        credit: itemsType.paid - (itemsType.total + item.total) * itemsType.discount\n      });\n    });\n    console.log(itemsType);\n  }, [itemsType]);\n  const handleAdd = useCallback(() => {\n    // handleUpdateTable()\n    setItemsType({\n      ...itemsType,\n      items: [...itemsType.items, activeItem],\n      total: itemsType.total + activeItem.total\n    });\n    setActiveItem({\n      item_id: 0,\n      width: 0,\n      height: 0,\n      size: 0,\n      quantity: 0,\n      price: 0,\n      total: 0,\n      notes: \"\",\n      itemName: \"\"\n    });\n  }, [activeItem, handleUpdateTable, itemsType]);\n  const handleDelete = useCallback(() => {}, []);\n  const handleSave = useCallback(() => {\n    setRow(itemsType);\n    resetItemsType();\n  }, [itemsType, resetItemsType, setRow]);\n  const handleClear = useCallback(() => {\n    resetItemsType();\n  }, [resetItemsType]);\n  const handlePrint = useCallback(() => {}, []);\n  useEffect(() => {\n    setItemsType({\n      ...itemsType,\n      total_after_discount: itemsType.total - itemsType.discount\n    });\n  }, [itemsType.total, itemsType.discount]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: itemsType.items,\n      actionColumn: true,\n      actionLabel: \"Delete\",\n      onAction: handleDelete,\n      hideTools: false,\n      onAdd: handleAdd,\n      onSave: handleSave,\n      onSelectedRow: setActiveItem,\n      onPrint: handlePrint,\n      children: /*#__PURE__*/_jsxDEV(InsertForm, {\n        itemState: itemState,\n        itemChange: itemChange,\n        activeItem: activeItem,\n        setActiveItem: setActiveItem,\n        onChange: onChange,\n        state: state\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: \"flex\",\n        width: \"100%\",\n        justifyContent: \"space-between\",\n        padding: \"0 100px\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(InputText, {\n        name: \"total\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.total,\n        Label: \"Total\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"discount\"\n        //@ts-ignore\n        ,\n        value: state.discount,\n        Label: \"Discount\",\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"totalAfterDiscount\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.total_after_discount,\n        Label: \"Total After Discount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"paid\"\n        //@ts-ignore\n        ,\n        value: state.paid,\n        Label: \"Paid\",\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(InputText, {\n        name: \"credit\",\n        disabled: true\n        //@ts-ignore\n        ,\n        value: state.credit,\n        Label: \"Credit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(SupplierInvoice, \"MMJrwQnLVEUgw19lKDcomDeOIVk=\", false, function () {\n  return [usePost, useFormManager, useFormManager];\n});\n_c = SupplierInvoice;\nexport default _c2 = /*#__PURE__*/memo(SupplierInvoice);\nvar _c, _c2;\n$RefreshReg$(_c, \"SupplierInvoice\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"names":["memo","useState","useCallback","useEffect","usePost","Table","InputText","useFormManager","columns","InsertForm","SupplierInvoice","setRow","itemsType","setItemsType","supplier_id","date","Date","now","items","query_status","total","discount","total_after_discount","paid","credit","activeItem","setActiveItem","item_id","width","height","size","quantity","price","notes","itemName","state","itemState","onChange","itemChange","resetItemsType","handleUpdateTable","map","item","console","log","handleAdd","handleDelete","handleSave","handleClear","handlePrint","display","justifyContent","padding"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/Pages/SupplierInvoice/component.tsx"],"sourcesContent":["import { memo, useState, useCallback, useEffect } from 'react';\r\nimport \"./style.css\";\r\nimport usePost from '../../hooks/usePost';\r\nimport Table from '../../components/TableView/Table';\r\nimport InputText from '../../components/InputText/InputText';\r\nimport useFormManager from '../../hooks/useFormManager';\r\nimport { columns } from \"./constants\";\r\nimport InsertForm from \"./Partials/InsertForm\"\r\n\r\n\r\ninterface itemsType {\r\n    item_id: number;\r\n    width: number;\r\n    height: number;\r\n    size: number;\r\n    quantity: number;\r\n    price: number;\r\n    total: number;\r\n    notes?: string;\r\n    itemName: string\r\n}\r\ninterface invoiceDtls {\r\n    supplier_id: number;\r\n    date: string;\r\n    items: itemsType[];\r\n    query_status: string;\r\n    total: number;\r\n    discount: number;\r\n    total_after_discount: number;\r\n    paid: number;\r\n    credit: number;\r\n}\r\n\r\nconst SupplierInvoice = () => {\r\n\r\n\r\n\r\n    const { setRow } = usePost(\"invoices/supplier_invoice_dml\")\r\n\r\n    const [itemsType, setItemsType] = useState<invoiceDtls>({\r\n        supplier_id: 1,\r\n        date: Date.now(),\r\n        items: [],\r\n        query_status: \"n\",\r\n        total: 0,\r\n        discount: 0,\r\n        total_after_discount: 0,\r\n        paid: 0,\r\n        credit: 0\r\n    })\r\n    const [activeItem, setActiveItem] = useState<itemsType>({\r\n        item_id: 0,\r\n        width: 0,\r\n        height: 0,\r\n        size: 0,\r\n        quantity: 0,\r\n        price: 0,\r\n        total: 0,\r\n        notes: \"\",\r\n        itemName: \"\"\r\n    })\r\n\r\n    const { state: itemState, onChange: itemChange } = useFormManager(activeItem, setActiveItem)\r\n    const { state, onChange } = useFormManager(itemsType, setItemsType)\r\n\r\n    const resetItemsType = useCallback(() => {\r\n        //@ts-ignore\r\n        setItemsType({})\r\n    }, [])\r\n    const handleUpdateTable = useCallback(() => {\r\n        itemsType.items.map((item: itemsType) => {\r\n            setItemsType({ ...itemsType, total: itemsType.total + item.total, total_after_discount: (itemsType.total + item.total) * itemsType.discount, credit: itemsType.paid - ((itemsType.total + item.total) * itemsType.discount) })\r\n        })\r\n        console.log(itemsType)\r\n    }, [itemsType])\r\n\r\n\r\n    const handleAdd = useCallback(() => {\r\n        // handleUpdateTable()\r\n        setItemsType({ ...itemsType, items: [...itemsType.items, activeItem], total: itemsType.total + activeItem.total })\r\n        setActiveItem({\r\n            item_id: 0,\r\n            width: 0,\r\n            height: 0,\r\n            size: 0,\r\n            quantity: 0,\r\n            price: 0,\r\n            total: 0,\r\n            notes: \"\",\r\n            itemName: \"\"\r\n        })\r\n\r\n    }, [activeItem, handleUpdateTable, itemsType]);\r\n\r\n    const handleDelete = useCallback(() => {\r\n    }, []);\r\n    const handleSave = useCallback(() => {\r\n        setRow(itemsType)\r\n        resetItemsType()\r\n    }, [itemsType, resetItemsType, setRow]);\r\n    const handleClear = useCallback(() => {\r\n        resetItemsType()\r\n    }, [resetItemsType]);\r\n    const handlePrint = useCallback(() => {\r\n    }, [])\r\n\r\n    useEffect(() => {\r\n        setItemsType({ ...itemsType, total_after_discount: itemsType.total - itemsType.discount })\r\n    }, [itemsType.total, itemsType.discount])\r\n\r\n\r\n    return (\r\n        <>\r\n\r\n            <Table\r\n                columns={columns}\r\n                dataSource={itemsType.items}\r\n                actionColumn\r\n                actionLabel=\"Delete\"\r\n                onAction={handleDelete}\r\n                hideTools={false}\r\n                onAdd={handleAdd}\r\n                onSave={handleSave}\r\n                onSelectedRow={setActiveItem}\r\n                onPrint={handlePrint}\r\n            >\r\n                <InsertForm\r\n                    itemState={itemState}\r\n                    itemChange={itemChange}\r\n                    activeItem={activeItem}\r\n                    setActiveItem={setActiveItem}\r\n                    onChange={onChange}\r\n                    state={state}\r\n                />\r\n            </Table>\r\n            <div style={{ display: \"flex\", width: \"100%\", justifyContent: \"space-between\", padding: \"0 100px\" }}>\r\n                <InputText\r\n                    name='total'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.total}\r\n                    Label=\"Total\"\r\n                />\r\n                <InputText\r\n                    name='discount'\r\n                    //@ts-ignore\r\n                    value={state.discount}\r\n                    Label=\"Discount\"\r\n                    onChange={onChange}\r\n                />\r\n                <InputText\r\n                    name='totalAfterDiscount'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.total_after_discount}\r\n                    Label=\"Total After Discount\"\r\n                />\r\n                <InputText\r\n                    name='paid'\r\n                    //@ts-ignore\r\n                    value={state.paid}\r\n                    Label=\"Paid\"\r\n                    onChange={onChange}\r\n                />\r\n                <InputText\r\n                    name='credit'\r\n                    disabled\r\n                    //@ts-ignore\r\n                    value={state.credit}\r\n                    Label=\"Credit\"\r\n                />\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default memo(SupplierInvoice);\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}