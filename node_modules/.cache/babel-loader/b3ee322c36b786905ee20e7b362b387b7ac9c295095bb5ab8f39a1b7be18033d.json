{"ast":null,"code":"import _objectSpread from\"C:/Users/Zyad Ahmed/Documents/Active Projects/SalamApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Zyad Ahmed/Documents/Active Projects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{memo,useState,useCallback}from\"react\";import Table from\"./Table\";import useFetch from\"../../hooks/useFetch\";import useTableControlsButtons from\"./hooks/useTableControlsButtons\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ApiTable=function ApiTable(_ref){var api=_ref.api,postApi=_ref.postApi,columns=_ref.columns,hideTools=_ref.hideTools,canAdd=_ref.canAdd,canEdit=_ref.canEdit,canDelete=_ref.canDelete,rowKey=_ref.rowKey,Modal=_ref.Modal;var _useFetch=useFetch(api),data=_useFetch.data;var _useTableControlsButt=useTableControlsButtons(postApi),setSelectedRow=_useTableControlsButt.setSelectedRow,onSaveAndInsertion=_useTableControlsButt.onSaveAndInsertion,selectedRow=_useTableControlsButt.selectedRow;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),rows=_useState2[0],setRows=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),modal=_useState4[0],setModal=_useState4[1];var handleAdd=useCallback(function(){setSelectedRow({query_status:\"n\"});setModal(true);},[setSelectedRow]);var handleEdit=useCallback(function(){setSelectedRow(_objectSpread(_objectSpread({},rows),{},{query_status:\"u\"}));setModal(true);},[rows,setSelectedRow]);var handleDelete=function handleDelete(){setSelectedRow(_objectSpread(_objectSpread({},rows),{},{query_status:\"d\"}));onSaveAndInsertion();};var handleCloseModal=useCallback(function(){setModal(false);},[]);var handleSaveModal=useCallback(function(){setModal(false);onSaveAndInsertion();},[onSaveAndInsertion]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Modal,{visible:modal,onOK:handleSaveModal,onClose:handleCloseModal,selectedRow:selectedRow,setSelectedRow:setSelectedRow}),/*#__PURE__*/_jsx(Table,{dataSource:data,columns:columns,hideTools:hideTools,canAdd:canAdd,canEdit:canEdit,canDelete:canDelete,rowkey:rowKey,onAdd:handleAdd,onEdit:handleEdit,onDelete:handleDelete,onSelectedRow:setRows})]});};export default/*#__PURE__*/memo(ApiTable);","map":{"version":3,"names":["memo","useState","useCallback","Table","useFetch","useTableControlsButtons","ApiTable","api","postApi","columns","hideTools","canAdd","canEdit","canDelete","rowKey","Modal","data","setSelectedRow","onSaveAndInsertion","selectedRow","rows","setRows","modal","setModal","handleAdd","query_status","handleEdit","handleDelete","handleCloseModal","handleSaveModal"],"sources":["C:/Users/Zyad Ahmed/Documents/Active Projects/SalamApp/src/components/TableView/ApiTable.tsx"],"sourcesContent":["import { memo, useState, useCallback } from \"react\";\r\nimport Table from \"./Table\";\r\nimport useFetch from \"../../hooks/useFetch\";\r\nimport useTableControlsButtons from \"./hooks/useTableControlsButtons\"\r\n\r\ninterface ApiTableProps {\r\n    api: string;\r\n    postApi?: string;\r\n    columns: {\r\n        title: string,\r\n        dataIndex: string,\r\n        width: number\r\n    }[];\r\n    hideTools?: boolean;\r\n    canAdd?: boolean;\r\n    canEdit?: boolean;\r\n    canDelete?: boolean;\r\n    rowKey: string;\r\n    Modal?: any\r\n}\r\n\r\nconst ApiTable = ({\r\n    api,\r\n    postApi,\r\n    columns,\r\n    hideTools,\r\n    canAdd,\r\n    canEdit,\r\n    canDelete,\r\n    rowKey,\r\n    Modal\r\n}: ApiTableProps) => {\r\n\r\n    const { data } = useFetch(api)\r\n    const { setSelectedRow, onSaveAndInsertion, selectedRow } = useTableControlsButtons(postApi)\r\n    const [rows, setRows] = useState({})\r\n    const [modal, setModal] = useState(false)\r\n    const handleAdd = useCallback(() => {\r\n        setSelectedRow({ query_status: \"n\" })\r\n        setModal(true)\r\n    }, [setSelectedRow])\r\n    const handleEdit = useCallback(() => {\r\n        setSelectedRow({ ...rows, query_status: \"u\" })\r\n        setModal(true)\r\n    }, [rows, setSelectedRow])\r\n    const handleDelete = () => {\r\n        setSelectedRow({ ...rows, query_status: \"d\" })\r\n        onSaveAndInsertion()\r\n    }\r\n\r\n    const handleCloseModal = useCallback(() => {\r\n        setModal(false)\r\n    }, [])\r\n\r\n    const handleSaveModal = useCallback(() => {\r\n        setModal(false)\r\n        onSaveAndInsertion()\r\n    }, [onSaveAndInsertion])\r\n\r\n    return (\r\n        <>\r\n            <Modal\r\n                visible={modal}\r\n                onOK={handleSaveModal}\r\n                onClose={handleCloseModal}\r\n                selectedRow={selectedRow}\r\n                setSelectedRow={setSelectedRow}\r\n            />\r\n            <Table\r\n                dataSource={data}\r\n                columns={columns}\r\n                hideTools={hideTools}\r\n                canAdd={canAdd}\r\n                canEdit={canEdit}\r\n                canDelete={canDelete}\r\n                rowkey={rowKey}\r\n                onAdd={handleAdd}\r\n                onEdit={handleEdit}\r\n                onDelete={handleDelete}\r\n                onSelectedRow={setRows}\r\n            >\r\n            </Table>\r\n\r\n        </>\r\n    )\r\n}\r\n\r\nexport default memo(ApiTable)"],"mappings":"uRAAA,OAASA,IAAI,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACnD,MAAOC,MAAK,KAAM,SAAS,CAC3B,MAAOC,SAAQ,KAAM,sBAAsB,CAC3C,MAAOC,wBAAuB,KAAM,iCAAiC,8IAkBrE,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAUO,IATjBC,IAAG,MAAHA,GAAG,CACHC,OAAO,MAAPA,OAAO,CACPC,OAAO,MAAPA,OAAO,CACPC,SAAS,MAATA,SAAS,CACTC,MAAM,MAANA,MAAM,CACNC,OAAO,MAAPA,OAAO,CACPC,SAAS,MAATA,SAAS,CACTC,MAAM,MAANA,MAAM,CACNC,KAAK,MAALA,KAAK,CAGL,cAAiBX,QAAQ,CAACG,GAAG,CAAC,CAAtBS,IAAI,WAAJA,IAAI,CACZ,0BAA4DX,uBAAuB,CAACG,OAAO,CAAC,CAApFS,cAAc,uBAAdA,cAAc,CAAEC,kBAAkB,uBAAlBA,kBAAkB,CAAEC,WAAW,uBAAXA,WAAW,CACvD,cAAwBlB,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA7BmB,IAAI,eAAEC,OAAO,eACpB,eAA0BpB,QAAQ,CAAC,KAAK,CAAC,yCAAlCqB,KAAK,eAAEC,QAAQ,eACtB,GAAMC,UAAS,CAAGtB,WAAW,CAAC,UAAM,CAChCe,cAAc,CAAC,CAAEQ,YAAY,CAAE,GAAI,CAAC,CAAC,CACrCF,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,CAAE,CAACN,cAAc,CAAC,CAAC,CACpB,GAAMS,WAAU,CAAGxB,WAAW,CAAC,UAAM,CACjCe,cAAc,gCAAMG,IAAI,MAAEK,YAAY,CAAE,GAAG,GAAG,CAC9CF,QAAQ,CAAC,IAAI,CAAC,CAClB,CAAC,CAAE,CAACH,IAAI,CAAEH,cAAc,CAAC,CAAC,CAC1B,GAAMU,aAAY,CAAG,QAAfA,aAAY,EAAS,CACvBV,cAAc,gCAAMG,IAAI,MAAEK,YAAY,CAAE,GAAG,GAAG,CAC9CP,kBAAkB,EAAE,CACxB,CAAC,CAED,GAAMU,iBAAgB,CAAG1B,WAAW,CAAC,UAAM,CACvCqB,QAAQ,CAAC,KAAK,CAAC,CACnB,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMM,gBAAe,CAAG3B,WAAW,CAAC,UAAM,CACtCqB,QAAQ,CAAC,KAAK,CAAC,CACfL,kBAAkB,EAAE,CACxB,CAAC,CAAE,CAACA,kBAAkB,CAAC,CAAC,CAExB,mBACI,wCACI,KAAC,KAAK,EACF,OAAO,CAAEI,KAAM,CACf,IAAI,CAAEO,eAAgB,CACtB,OAAO,CAAED,gBAAiB,CAC1B,WAAW,CAAET,WAAY,CACzB,cAAc,CAAEF,cAAe,EACjC,cACF,KAAC,KAAK,EACF,UAAU,CAAED,IAAK,CACjB,OAAO,CAAEP,OAAQ,CACjB,SAAS,CAAEC,SAAU,CACrB,MAAM,CAAEC,MAAO,CACf,OAAO,CAAEC,OAAQ,CACjB,SAAS,CAAEC,SAAU,CACrB,MAAM,CAAEC,MAAO,CACf,KAAK,CAAEU,SAAU,CACjB,MAAM,CAAEE,UAAW,CACnB,QAAQ,CAAEC,YAAa,CACvB,aAAa,CAAEN,OAAQ,EAEnB,GAET,CAEX,CAAC,CAED,2BAAerB,IAAI,CAACM,QAAQ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}