{"ast":null,"code":"import _toConsumableArray from\"/home/zyad/Documents/active_projects/SalamApp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/zyad/Documents/active_projects/SalamApp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/zyad/Documents/active_projects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{memo,useCallback,useEffect,useState}from\"react\";import InsertForm from\"./Partials/InsertForm\";import InputText from\"../../components/InputText/InputText\";import useFormManager from\"../../hooks/useFormManager\";import usePost from\"../../hooks/usePost\";import Table from\"../../components/TableView/Table\";import{columns}from\"./constant\";import Flex from\"../../components/Flex/Flex\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CustomerInvoices=function CustomerInvoices(){var _usePost=usePost({link:\"POST_CUSTOMER_INVOICE_DETAILS\"}),setRow=_usePost.setRow;var _useState=useState({customer_id:0,date:\"\",items:[],query_status:\"n\",total:0,discount:0,total_after_discount:0,paid:0,credit:0}),_useState2=_slicedToArray(_useState,2),itemsType=_useState2[0],setItemsType=_useState2[1];var _useState3=useState({item_id:0,width:0,height:0,size:0,quantity:0,price:0,total:0,notes:\"\",itemName:\"\",print_id:0,print_name:\"\"}),_useState4=_slicedToArray(_useState3,2),activeItem=_useState4[0],setActiveItem=_useState4[1];var _useFormManager=useFormManager({initialValue:activeItem,setSelectedRow:setActiveItem}),itemState=_useFormManager.state,itemChange=_useFormManager.onChange;var _useFormManager2=useFormManager({initialValue:itemsType,setSelectedRow:setItemsType}),state=_useFormManager2.state,onChange=_useFormManager2.onChange;var resetItemsType=useCallback(function(){//@ts-ignore\nsetItemsType({customer_id:0,date:\"\",items:[],query_status:\"n\",total:0,discount:0,total_after_discount:0,paid:0,credit:0});},[]);var handleAdd=useCallback(function(){setItemsType(_objectSpread(_objectSpread({},itemsType),{},{items:[].concat(_toConsumableArray(itemsType.items),[activeItem]),total:itemsType.total+activeItem.total}));setActiveItem({item_id:0,width:0,height:0,size:0,quantity:0,price:0,total:0,notes:\"\",itemName:\"\",print_id:0,print_name:\"\"});},[activeItem,itemsType]);var handleSave=useCallback(function(){setRow(itemsType);resetItemsType();},[itemsType,resetItemsType,setRow]);useEffect(function(){setItemsType(_objectSpread(_objectSpread({},itemsType),{},{total_after_discount:itemsType.total-itemsType.discount,credit:itemsType.total-itemsType.discount-itemsType.paid}));// eslint-disable-next-line react-hooks/exhaustive-deps\n},[itemsType.total,itemsType.discount,itemsType.paid]);var addionalButtons=[{icon:\"fa-solid fa-broom\",onClick:resetItemsType}];return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Flex,{flexDirection:\"column\",width:\"100%\",children:[/*#__PURE__*/_jsx(InsertForm,{itemState:itemState,itemChange:itemChange,activeItem:activeItem,setActiveItem:setActiveItem,onChange:onChange,state:state}),/*#__PURE__*/_jsx(Table,{columns:columns,dataSource:itemsType.items,actionColumn:true,actionLabel:\"Delete\"// onAction={handleDelete}\n,hideTools:false,onAdd:handleAdd,onSave:handleSave,onSelectedRow:setActiveItem,canAdd:true,canSave:true,addionalButtons:addionalButtons}),/*#__PURE__*/_jsxs(Flex,{width:\"100%\",justifyContent:\"space-around\",children:[/*#__PURE__*/_jsx(InputText,{name:\"total\",disabled:true,value:state.total,Label:\"total\",width:\"15%\"}),/*#__PURE__*/_jsx(InputText,{name:\"discount\",value:state.discount,Label:\"dscnt\",onChange:onChange,width:\"15%\"}),/*#__PURE__*/_jsx(InputText,{name:\"totalAfterDiscount\",disabled:true,value:state.total_after_discount,Label:\"Tlaftrdsnt\",width:\"15%\"}),/*#__PURE__*/_jsx(InputText,{name:\"paid\",value:state.paid,Label:\"paid\",onChange:onChange,width:\"15%\"}),/*#__PURE__*/_jsx(InputText,{name:\"credit\",disabled:true,value:state.credit,Label:\"Crdt\",width:\"15%\"})]})]})});};export default/*#__PURE__*/memo(CustomerInvoices);","map":{"version":3,"names":["memo","useCallback","useEffect","useState","InsertForm","InputText","useFormManager","usePost","Table","columns","Flex","CustomerInvoices","link","setRow","customer_id","date","items","query_status","total","discount","total_after_discount","paid","credit","itemsType","setItemsType","item_id","width","height","size","quantity","price","notes","itemName","print_id","print_name","activeItem","setActiveItem","initialValue","setSelectedRow","itemState","state","itemChange","onChange","resetItemsType","handleAdd","handleSave","addionalButtons","icon","onClick"],"sources":["/home/zyad/Documents/active_projects/SalamApp/src/Pages/CustomerInvoices/component.tsx"],"sourcesContent":["import { memo, useCallback, useEffect, useState } from \"react\";\nimport InsertForm from \"./Partials/InsertForm\";\nimport InputText from \"../../components/InputText/InputText\";\nimport useFormManager from \"../../hooks/useFormManager\";\nimport usePost from \"../../hooks/usePost\";\nimport { invoiceDtls, itemsType } from \"./interface\";\nimport Table from \"../../components/TableView/Table\";\nimport { columns } from \"./constant\"\nimport Flex from \"../../components/Flex/Flex\";\n\nconst CustomerInvoices = () => {\n    const { setRow } = usePost({ link: \"POST_CUSTOMER_INVOICE_DETAILS\" })\n\n    const [itemsType, setItemsType] = useState<invoiceDtls>({\n        customer_id: 0,\n        date: \"\",\n        items: [],\n        query_status: \"n\",\n        total: 0,\n        discount: 0,\n        total_after_discount: 0,\n        paid: 0,\n        credit: 0\n    })\n    const [activeItem, setActiveItem] = useState<itemsType>({\n        item_id: 0,\n        width: 0,\n        height: 0,\n        size: 0,\n        quantity: 0,\n        price: 0,\n        total: 0,\n        notes: \"\",\n        itemName: \"\",\n        print_id: 0,\n        print_name: \"\"\n    })\n\n    const { state: itemState, onChange: itemChange } = useFormManager({ initialValue: activeItem, setSelectedRow: setActiveItem })\n    const { state, onChange } = useFormManager({ initialValue: itemsType, setSelectedRow: setItemsType })\n\n    const resetItemsType = useCallback(() => {\n        //@ts-ignore\n        setItemsType({\n            customer_id: 0,\n            date: \"\",\n            items: [],\n            query_status: \"n\",\n            total: 0,\n            discount: 0,\n            total_after_discount: 0,\n            paid: 0,\n            credit: 0\n        })\n    }, [])\n\n    const handleAdd = useCallback(() => {\n        setItemsType({ ...itemsType, items: [...itemsType.items, activeItem], total: itemsType.total + activeItem.total })\n        setActiveItem({\n            item_id: 0,\n            width: 0,\n            height: 0,\n            size: 0,\n            quantity: 0,\n            price: 0,\n            total: 0,\n            notes: \"\",\n            itemName: \"\",\n            print_id: 0,\n            print_name: \"\"\n        })\n\n    }, [activeItem, itemsType]);\n\n    const handleSave = useCallback(() => {\n        setRow(itemsType)\n        resetItemsType()\n    }, [itemsType, resetItemsType, setRow]);\n\n    useEffect(() => {\n        setItemsType({ ...itemsType, total_after_discount: itemsType.total - itemsType.discount, credit: itemsType.total - itemsType.discount - itemsType.paid })\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [itemsType.total, itemsType.discount, itemsType.paid])\n\n    const addionalButtons = [\n        {\n            icon: \"fa-solid fa-broom\",\n            onClick: resetItemsType\n        },\n    ]\n    return (\n        <>\n            <Flex flexDirection=\"column\" width=\"100%\">\n                <InsertForm\n                    itemState={itemState}\n                    itemChange={itemChange}\n                    activeItem={activeItem}\n                    setActiveItem={setActiveItem}\n                    onChange={onChange}\n                    state={state}\n                />\n                <Table\n                    columns={columns}\n                    dataSource={itemsType.items}\n                    actionColumn\n                    actionLabel=\"Delete\"\n                    // onAction={handleDelete}\n                    hideTools={false}\n                    onAdd={handleAdd}\n                    onSave={handleSave}\n                    onSelectedRow={setActiveItem}\n                    canAdd={true}\n                    canSave={true}\n                    addionalButtons={addionalButtons}\n                />\n                <Flex width='100%' justifyContent='space-around'>\n                    <InputText\n                        name='total'\n                        disabled\n                        value={state.total}\n                        Label=\"total\"\n                        width=\"15%\"\n                    />\n                    <InputText\n                        name='discount'\n                        value={state.discount}\n                        Label=\"dscnt\"\n                        onChange={onChange}\n                        width=\"15%\"\n                    />\n                    <InputText\n                        name='totalAfterDiscount'\n                        disabled\n                        value={state.total_after_discount}\n                        Label=\"Tlaftrdsnt\"\n                        width=\"15%\"\n                    />\n                    <InputText\n                        name='paid'\n                        value={state.paid}\n                        Label=\"paid\"\n                        onChange={onChange}\n                        width=\"15%\"\n                    />\n                    <InputText\n                        name='credit'\n                        disabled\n                        value={state.credit}\n                        Label=\"Crdt\"\n                        width=\"15%\"\n                    />\n                </Flex>\n            </Flex>\n        </>\n    )\n}\n\nexport default memo(CustomerInvoices)"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}