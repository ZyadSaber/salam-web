{"ast":null,"code":"import _regeneratorRuntime from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/zyad/Documents/ActiveProjects/SalamApp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect,useCallback}from\"react\";import API_ID from\"../global/api\";import useLoacalStorage from\"./useLocalStorage\";var useFetch=function useFetch(_ref){var _ref$link=_ref.link,link=_ref$link===void 0?\"\":_ref$link,fetchOnFirstRun=_ref.fetchOnFirstRun,refreshTimeout=_ref.refreshTimeout,params=_ref.params,_ref$noAuthorization=_ref.noAuthorization,noAuthorization=_ref$noAuthorization===void 0?false:_ref$noAuthorization;var _useLoacalStorage=useLoacalStorage(),authorization=_useLoacalStorage.authorization;//@ts-ignore\nvar url=\"http://144.24.209.19:9090/api/v1/\".concat(API_ID[link]);// const url = `http://127.0.0.1:9090/api/v1/${link}`\n// const url = `http://192.168.1.250:9090/api/v1/${link}`\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var getData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,apiData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(authorization||noAuthorization)){_context.next=8;break;}_context.next=3;return fetch(\"\".concat(url,\"?authorization=\").concat(authorization,\"&\").concat(new URLSearchParams(params)));case 3:response=_context.sent;_context.next=6;return response.json();case 6:apiData=_context.sent;setData(apiData);case 8:case\"end\":return _context.stop();}}},_callee);})),[authorization,noAuthorization,params,url]);useEffect(function(){if(fetchOnFirstRun){getData();}},[fetchOnFirstRun,getData,url,params]);var runFetch=useCallback(function(){// getData()\n},[]);return{data:data,runFetch:runFetch,setData:setData};};export default useFetch;","map":{"version":3,"names":["useState","useEffect","useCallback","API_ID","useLoacalStorage","useFetch","link","fetchOnFirstRun","refreshTimeout","params","noAuthorization","authorization","url","data","setData","getData","fetch","URLSearchParams","response","json","apiData","runFetch"],"sources":["/home/zyad/Documents/ActiveProjects/SalamApp/src/hooks/useFetch.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport API_ID from \"../global/api\";\r\nimport useLoacalStorage from \"./useLocalStorage\";\r\n\r\ninterface useFetchProp {\r\n  link: string;\r\n  fetchOnFirstRun?: boolean;\r\n  refreshTimeout?: number;\r\n  params?: any\r\n  noAuthorization?: boolean\r\n}\r\n\r\nconst useFetch = ({\r\n  link = \"\", \r\n  fetchOnFirstRun,\r\n   refreshTimeout,\r\n    params, \r\n    noAuthorization = false\r\n  }: useFetchProp) => {\r\n  const { authorization } = useLoacalStorage()\r\n  //@ts-ignore\r\n  const url = `http://144.24.209.19:9090/api/v1/${API_ID[link]}`\r\n  // const url = `http://127.0.0.1:9090/api/v1/${link}`\r\n  // const url = `http://192.168.1.250:9090/api/v1/${link}`\r\n  const [data, setData] = useState<any>([]);\r\n  const getData = useCallback(async()=>{\r\n    if(authorization || noAuthorization){\r\nconst response = await fetch(`${url}?authorization=${authorization}&${new URLSearchParams(params)}`)\r\n    const apiData=await response.json();  \r\n  setData(apiData);\r\n    }\r\n},[authorization, noAuthorization, params, url])\r\n\r\n\r\n    useEffect(() => {\r\n      if(fetchOnFirstRun){\r\n        getData()\r\n      }\r\n      }, [fetchOnFirstRun, getData, url, params]);\r\n\r\n\r\n\r\n      const runFetch = useCallback(()=>{\r\n          // getData()\r\n      },[])\r\n\r\n      return{data, runFetch, setData}\r\n}\r\n\r\nexport default useFetch"],"mappings":"sZAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CACxD,MAAOC,OAAM,KAAM,eAAe,CAClC,MAAOC,iBAAgB,KAAM,mBAAmB,CAUhD,GAAMC,SAAQ,CAAG,QAAXA,SAAQ,MAMQ,oBALpBC,IAAI,CAAJA,IAAI,oBAAG,EAAE,WACTC,eAAe,MAAfA,eAAe,CACdC,cAAc,MAAdA,cAAc,CACbC,MAAM,MAANA,MAAM,2BACNC,eAAe,CAAfA,eAAe,+BAAG,KAAK,sBAEzB,sBAA0BN,gBAAgB,EAAE,CAApCO,aAAa,mBAAbA,aAAa,CACrB;AACA,GAAMC,IAAG,4CAAuCT,MAAM,CAACG,IAAI,CAAC,CAAE,CAC9D;AACA;AACA,cAAwBN,QAAQ,CAAM,EAAE,CAAC,wCAAlCa,IAAI,eAAEC,OAAO,eACpB,GAAMC,QAAO,CAAGb,WAAW,wEAAC,+JACvBS,aAAa,EAAID,eAAe,gDAChBM,MAAK,WAAIJ,GAAG,2BAAkBD,aAAa,aAAI,GAAIM,gBAAe,CAACR,MAAM,CAAC,EAAG,QAA9FS,QAAQ,qCACUA,SAAQ,CAACC,IAAI,EAAE,QAA7BC,OAAO,eACfN,OAAO,CAACM,OAAO,CAAC,CAAC,sDAElB,GAAC,CAACT,aAAa,CAAED,eAAe,CAAED,MAAM,CAAEG,GAAG,CAAC,CAAC,CAG5CX,SAAS,CAAC,UAAM,CACd,GAAGM,eAAe,CAAC,CACjBQ,OAAO,EAAE,CACX,CACA,CAAC,CAAE,CAACR,eAAe,CAAEQ,OAAO,CAAEH,GAAG,CAAEH,MAAM,CAAC,CAAC,CAI3C,GAAMY,SAAQ,CAAGnB,WAAW,CAAC,UAAI,CAC7B;AAAA,CACH,CAAC,EAAE,CAAC,CAEL,MAAM,CAACW,IAAI,CAAJA,IAAI,CAAEQ,QAAQ,CAARA,QAAQ,CAAEP,OAAO,CAAPA,OAAO,CAAC,CACrC,CAAC,CAED,cAAeT,SAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}